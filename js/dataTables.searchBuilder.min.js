/*!
 SearchBuilder 1.0.1
 Â©2020 SpryMedia Ltd - datatables.net/license/mit
*/
(function(){var x=function(a,b,c,e){var d=b.moment?b.moment:b.dayjs?b.dayjs:null,f=function(b,c){this.c=a.extend(!0,{},f.defaults,c);var e=this.c.classPrefix,s=this.c.i18n;if(!d&&"YYYY-MM-DD"!==this.c.format)throw"DateTime: Without momentjs or dayjs only the format 'YYYY-MM-DD' can be used";"string"===typeof this.c.minDate&&(this.c.minDate=new Date(this.c.minDate));"string"===typeof this.c.maxDate&&(this.c.maxDate=new Date(this.c.maxDate));s=a('<div class="'+e+'"><div class="'+e+'-date"><div class="'+
e+'-title"><div class="'+e+'-iconLeft"><button>'+s.previous+'</button></div><div class="'+e+'-iconRight"><button>'+s.next+'</button></div><div class="'+e+'-label"><span></span><select class="'+e+'-month"></select></div><div class="'+e+'-label"><span></span><select class="'+e+'-year"></select></div></div><div class="'+e+'-calendar"></div></div><div class="'+e+'-time"><div class="'+e+'-hours"></div><div class="'+e+'-minutes"></div><div class="'+e+'-seconds"></div></div><div class="'+e+'-error"></div></div>');
this.dom={container:s,date:s.find("."+e+"-date"),title:s.find("."+e+"-title"),calendar:s.find("."+e+"-calendar"),time:s.find("."+e+"-time"),error:s.find("."+e+"-error"),input:a(b)};this.s={d:null,display:null,minutesRange:null,secondsRange:null,namespace:"dateime-"+f._instance++,parts:{date:null!==this.c.format.match(/[YMD]|L(?!T)|l/),time:null!==this.c.format.match(/[Hhm]|LT|LTS/),seconds:-1!==this.c.format.indexOf("s"),hours12:null!==this.c.format.match(/[haA]/)}};this.dom.container.append(this.dom.date).append(this.dom.time).append(this.dom.error);
this.dom.date.append(this.dom.title).append(this.dom.calendar);this._constructor()};a.extend(f.prototype,{destroy:function(){this._hide(!0);this.dom.container.off().empty();this.dom.input.off(".datetime")},errorMsg:function(a){var b=this.dom.error;a?b.html(a):b.empty();return this},hide:function(){this._hide();return this},max:function(a){this.c.maxDate="string"===typeof a?new Date(a):a;this._optionsTitle();this._setCalander();return this},min:function(a){this.c.minDate="string"===typeof a?new Date(a):
a;this._optionsTitle();this._setCalander();return this},owns:function(b){return 0<a(b).parents().filter(this.dom.container).length},val:function(a,b){if(a===e)return this.s.d;if(a instanceof Date)this.s.d=this._dateToUtc(a);else if(null===a||""===a)this.s.d=null;else if("--now"===a)this.s.d=new Date;else if("string"===typeof a)if(d){var c=d.utc(a,this.c.format,this.c.locale,this.c.strict);this.s.d=c.isValid()?c.toDate():null}else c=a.match(/(\d{4})\-(\d{2})\-(\d{2})/),this.s.d=c?new Date(Date.UTC(c[1],
c[2]-1,c[3])):null;if(b||b===e)this.s.d?this._writeOutput():this.dom.input.val(a);this.s.d||(this.s.d=this._dateToUtc(new Date));this.s.display=new Date(this.s.d.toString());this.s.display.setUTCDate(1);this._setTitle();this._setCalander();this._setTime();return this},_constructor:function(){var c=this,e=this.c.classPrefix,d=function(){c.c.onChange.call(c,c.dom.input.val(),c.s.d,c.dom.input)};this.s.parts.date||this.dom.date.css("display","none");this.s.parts.time||this.dom.time.css("display","none");
this.s.parts.seconds||(this.dom.time.children("div."+e+"-seconds").remove(),this.dom.time.children("span").eq(1).remove());this._optionsTitle();b.allan=this;"hidden"===this.dom.input.attr("type")&&(this.dom.container.addClass("inline"),this.c.attachTo="input",this.val(this.dom.input.val(),!1),this._show());this.dom.input.attr("autocomplete","off").on("focus.datetime click.datetime",function(){if(!c.dom.container.is(":visible")&&!c.dom.input.is(":disabled")){c.val(c.dom.input.val(),false);c._show()}}).on("keyup.datetime",
function(){c.dom.container.is(":visible")&&c.val(c.dom.input.val(),false)});this.dom.container.on("change","select",function(){var b=a(this),f=b.val();if(b.hasClass(e+"-month")){c._correctMonth(c.s.display,f);c._setTitle();c._setCalander()}else if(b.hasClass(e+"-year")){c.s.display.setUTCFullYear(f);c._setTitle();c._setCalander()}else if(b.hasClass(e+"-hours")||b.hasClass(e+"-ampm")){if(c.s.parts.hours12){b=a(c.dom.container).find("."+e+"-hours").val()*1;f=a(c.dom.container).find("."+e+"-ampm").val()===
"pm";c.s.d.setUTCHours(b===12&&!f?0:f&&b!==12?b+12:b)}else c.s.d.setUTCHours(f);c._setTime();c._writeOutput(true);d()}else if(b.hasClass(e+"-minutes")){c.s.d.setUTCMinutes(f);c._setTime();c._writeOutput(true);d()}else if(b.hasClass(e+"-seconds")){c.s.d.setSeconds(f);c._setTime();c._writeOutput(true);d()}c.dom.input.focus();c._position()}).on("click",function(b){var f=c.s.d,h=b.target.nodeName.toLowerCase(),j=h==="span"?b.target.parentNode:b.target,h=j.nodeName.toLowerCase();if(h!=="select"){b.stopPropagation();
if(h==="button"){j=a(j);b=j.parent();if(b.hasClass("disabled")&&!b.hasClass("range"))j.blur();else if(b.hasClass(e+"-iconLeft")){c.s.display.setUTCMonth(c.s.display.getUTCMonth()-1);c._setTitle();c._setCalander();c.dom.input.focus()}else if(b.hasClass(e+"-iconRight")){c._correctMonth(c.s.display,c.s.display.getUTCMonth()+1);c._setTitle();c._setCalander();c.dom.input.focus()}else{if(j.parents("."+e+"-time").length){h=j.data("value");j=j.data("unit");if(j==="minutes"){if(b.hasClass("disabled")&&b.hasClass("range")){c.s.minutesRange=
h;c._setTime();return}c.s.minutesRange=null}if(j==="seconds"){if(b.hasClass("disabled")&&b.hasClass("range")){c.s.secondsRange=h;c._setTime();return}c.s.secondsRange=null}if(h==="am")if(f.getUTCHours()>=12)h=f.getUTCHours()-12;else return;else if(h==="pm")if(f.getUTCHours()<12)h=f.getUTCHours()+12;else return;f[j==="hours"?"setUTCHours":j==="minutes"?"setUTCMinutes":"setSeconds"](h);c._setTime();c._writeOutput(true)}else{f||(f=c._dateToUtc(new Date));f.setUTCDate(1);f.setUTCFullYear(j.data("year"));
f.setUTCMonth(j.data("month"));f.setUTCDate(j.data("day"));c._writeOutput(true);c.s.parts.time?c._setCalander():setTimeout(function(){c._hide()},10)}d()}}else c.dom.input.focus()}})},_compareDates:function(a,b){return this._dateToUtcString(a)===this._dateToUtcString(b)},_correctMonth:function(a,b){var c=this._daysInMonth(a.getUTCFullYear(),b),e=a.getUTCDate()>c;a.setUTCMonth(b);e&&(a.setUTCDate(c),a.setUTCMonth(b))},_daysInMonth:function(a,b){return[31,0===a%4&&(0!==a%100||0===a%400)?29:28,31,30,
31,30,31,31,30,31,30,31][b]},_dateToUtc:function(a){return new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()))},_dateToUtcString:function(a){return a.getUTCFullYear()+"-"+this._pad(a.getUTCMonth()+1)+"-"+this._pad(a.getUTCDate())},_hide:function(e){if(e||"hidden"!==this.dom.input.attr("type"))e=this.s.namespace,this.dom.container.detach(),a(b).off("."+e),a(c).off("keydown."+e),a("div.dataTables_scrollBody").off("scroll."+e),a("div.DTE_Body_Content").off("scroll."+
e),a("body").off("click."+e)},_hours24To12:function(a){return 0===a?12:12<a?a-12:a},_htmlDay:function(a){if(a.empty)return'<td class="empty"></td>';var b=["selectable"],c=this.c.classPrefix;a.disabled&&b.push("disabled");a.today&&b.push("now");a.selected&&b.push("selected");return'<td data-day="'+a.day+'" class="'+b.join(" ")+'"><button class="'+c+"-button "+c+'-day" type="button" data-year="'+a.year+'" data-month="'+a.month+'" data-day="'+a.day+'"><span>'+a.day+"</span></button></td>"},_htmlMonth:function(b,
c){var e=this._dateToUtc(new Date),d=this._daysInMonth(b,c),f=(new Date(Date.UTC(b,c,1))).getUTCDay(),h=[],j=[];0<this.c.firstDay&&(f-=this.c.firstDay,0>f&&(f+=7));for(var g=d+f,i=g;7<i;)i-=7;var g=g+(7-i),k=this.c.minDate,i=this.c.maxDate;k&&(k.setUTCHours(0),k.setUTCMinutes(0),k.setSeconds(0));i&&(i.setUTCHours(23),i.setUTCMinutes(59),i.setSeconds(59));for(var l=0,n=0;l<g;l++){var m=new Date(Date.UTC(b,c,1+(l-f))),o=this.s.d?this._compareDates(m,this.s.d):!1,z=this._compareDates(m,e),p=l<f||l>=
d+f,q=k&&m<k||i&&m>i,v=this.c.disableDays;Array.isArray(v)&&-1!==a.inArray(m.getUTCDay(),v)?q=!0:"function"===typeof v&&!0===v(m)&&(q=!0);j.push(this._htmlDay({day:1+(l-f),month:c,year:b,selected:o,today:z,disabled:q,empty:p}));7===++n&&(this.c.showWeekNumber&&j.unshift(this._htmlWeekOfYear(l-f,c,b)),h.push("<tr>"+j.join("")+"</tr>"),j=[],n=0)}e=this.c.classPrefix;d=e+"-table";this.c.showWeekNumber&&(d+=" weekNumber");k&&(k=k>=new Date(Date.UTC(b,c,1,0,0,0)),this.dom.title.find("div."+e+"-iconLeft").css("display",
k?"none":"block"));i&&(i=i<new Date(Date.UTC(b,c+1,1,0,0,0)),this.dom.title.find("div."+e+"-iconRight").css("display",i?"none":"block"));return'<table class="'+d+'"><thead>'+this._htmlMonthHead()+"</thead><tbody>"+h.join("")+"</tbody></table>"},_htmlMonthHead:function(){var a=[],b=this.c.firstDay,c=this.c.i18n,e=function(a){for(a+=b;7<=a;)a-=7;return c.weekdays[a]};this.c.showWeekNumber&&a.push("<th></th>");for(var d=0;7>d;d++)a.push("<th>"+e(d)+"</th>");return a.join("")},_htmlWeekOfYear:function(a,
b,c){a=new Date(c,b,a,0,0,0,0);a.setDate(a.getDate()+4-(a.getDay()||7));c=Math.ceil(((a-new Date(c,0,1))/864E5+1)/7);return'<td class="'+this.c.classPrefix+'-week">'+c+"</td>"},_options:function(a,b,c){c||(c=b);a=this.dom.container.find("select."+this.c.classPrefix+"-"+a);a.empty();for(var e=0,d=b.length;e<d;e++)a.append('<option value="'+b[e]+'">'+c[e]+"</option>")},_optionSet:function(a,b){var c=this.dom.container.find("select."+this.c.classPrefix+"-"+a),e=c.parent().children("span");c.val(b);c=
c.find("option:selected");e.html(0!==c.length?c.text():this.c.i18n.unknown)},_optionsTime:function(b,c,e,d,f){var h=this.c.classPrefix,j=this.dom.container.find("div."+h+"-"+b),g,i=12===c?function(a){return a}:this._pad,h=this.c.classPrefix,k=h+"-table",l=this.c.i18n;if(j.length){var n="";g=10;var m=function(f,j,g){12===c&&"number"===typeof f&&(12<=e&&(f+=12),12==f?f=0:24==f&&(f=12));var i=e===f||"am"===f&&12>e||"pm"===f&&12<=e?"selected":"";d&&-1===a.inArray(f,d)&&(i+=" disabled");g&&(i+=" "+g);
return'<td class="selectable '+i+'"><button class="'+h+"-button "+h+'-day" type="button" data-unit="'+b+'" data-value="'+f+'"><span>'+j+"</span></button></td>"};if(12===c){n+="<tr>";for(f=1;6>=f;f++)n+=m(f,i(f));n+=m("am",l.amPm[0]);n+="</tr><tr>";for(f=7;12>=f;f++)n+=m(f,i(f));n+=m("pm",l.amPm[1]);n+="</tr>";g=7}else{if(24===c){var o=0;for(g=0;4>g;g++){n+="<tr>";for(f=0;6>f;f++)n+=m(o,i(o)),o++;n+="</tr>"}}else{n+="<tr>";for(g=0;60>g;g+=10)n+=m(g,i(g),"range");f=null!==f?f:10*Math.floor(e/10);n=
n+"</tr>"+('</tbody></thead><table class="'+k+" "+k+'-nospace"><tbody>')+"<tr>";for(g=f+1;g<f+10;g++)n+=m(g,i(g));n+="</tr>"}g=6}j.empty().append('<table class="'+k+'"><thead><tr><th colspan="'+g+'">'+l[b]+"</th></tr></thead><tbody>"+n+"</tbody></table>")}},_optionsTitle:function(){var a=this.c.i18n,b=this.c.minDate,c=this.c.maxDate,b=b?b.getFullYear():null,c=c?c.getFullYear():null,b=null!==b?b:(new Date).getFullYear()-this.c.yearRange,c=null!==c?c:(new Date).getFullYear()+this.c.yearRange;this._options("month",
this._range(0,11),a.months);this._options("year",this._range(b,c))},_pad:function(a){return 10>a?"0"+a:a},_position:function(){var c="input"===this.c.attachTo?this.dom.input.position():this.dom.input.offset(),e=this.dom.container,f=this.dom.input.outerHeight();if(e.hasClass("inline"))e.insertAfter(this.dom.input);else{this.s.parts.date&&this.s.parts.time&&550<a(b).width()?e.addClass("horizontal"):e.removeClass("horizontal");"input"===this.c.attachTo?e.css({top:c.top+f,left:c.left}).insertAfter(this.dom.input):
e.css({top:c.top+f,left:c.left}).appendTo("body");var d=e.outerHeight(),h=e.outerWidth(),j=a(b).scrollTop();c.top+f+d-j>a(b).height()&&(f=c.top-d,e.css("top",0>f?0:f));h+c.left>a(b).width()&&(c=a(b).width()-h,"input"===this.c.attachTo&&(c-=a(e).offsetParent().offset().left),e.css("left",0>c?0:c))}},_range:function(a,b,c){var e=[];for(c||(c=1);a<=b;a+=c)e.push(a);return e},_setCalander:function(){this.s.display&&this.dom.calendar.empty().append(this._htmlMonth(this.s.display.getUTCFullYear(),this.s.display.getUTCMonth()))},
_setTitle:function(){this._optionSet("month",this.s.display.getUTCMonth());this._optionSet("year",this.s.display.getUTCFullYear())},_setTime:function(){var a=this,b=this.s.d,c=b?b.getUTCHours():0,e=function(b){return a.c[b+"Available"]?a.c[b+"Available"]:a._range(0,59,a.c[b+"Increment"])};this._optionsTime("hours",this.s.parts.hours12?12:24,c,this.c.hoursAvailable);this._optionsTime("minutes",60,b?b.getUTCMinutes():0,e("minutes"),this.s.minutesRange);this._optionsTime("seconds",60,b?b.getSeconds():
0,e("seconds"),this.s.secondsRange)},_show:function(){var e=this,f=this.s.namespace;this._position();a(b).on("scroll."+f+" resize."+f,function(){e._hide()});a("div.DTE_Body_Content").on("scroll."+f,function(){e._hide()});a("div.dataTables_scrollBody").on("scroll."+f,function(){e._hide()});var d=this.dom.input[0].offsetParent;if(d!==c.body)a(d).on("scroll."+f,function(){e._hide()});a(c).on("keydown."+f,function(a){(9===a.keyCode||27===a.keyCode||13===a.keyCode)&&e._hide()});setTimeout(function(){a("body").on("click."+
f,function(b){!a(b.target).parents().filter(e.dom.container).length&&b.target!==e.dom.input[0]&&e._hide()})},10)},_writeOutput:function(a){var b=this.s.d,c=d?d.utc(b,e,this.c.locale,this.c.strict).format(this.c.format):b.getUTCFullYear()+"-"+this._pad(b.getUTCMonth()+1)+"-"+this._pad(b.getUTCDate());this.dom.input.val(c).trigger("change",{write:b});"hidden"===this.dom.input.attr("type")&&this.val(c,!1);a&&this.dom.input.focus()}});f.use=function(a){d=a};f._instance=0;f.defaults={attachTo:"body",classPrefix:"dt-datetime",
disableDays:null,firstDay:1,format:"YYYY-MM-DD",hoursAvailable:null,i18n:{previous:"Previous",next:"Next",months:"January February March April May June July August September October November December".split(" "),weekdays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),amPm:["am","pm"],hours:"Hour",minutes:"Minute",seconds:"Second",unknown:"-"},maxDate:null,minDate:null,minutesAvailable:null,minutesIncrement:1,strict:!0,locale:"en",onChange:function(){},secondsAvailable:null,secondsIncrement:1,showWeekNumber:!1,
yearRange:25};f.version="1.0.1";b.DateTime||(b.DateTime=f);a.fn.dtDateTime=function(a){return this.each(function(){new f(this,a)})};a.fn.dataTable&&(a.fn.dataTable.DateTime=f,a.fn.DataTable.DateTime=f);return f};"function"===typeof define&&define.amd?define(["jquery"],function(a){return x(a,window,document)}):"object"===typeof exports?module.exports=function(a,b){a||(a=window);return x(b,a,a.document)}:x(jQuery,window,document);var f,q,o=window.moment,p=window.luxon,l,d=function(a,b,c,e,h){var j=
this;void 0===e&&(e=0);void 0===h&&(h=1);if(!q||!q.versionCheck||!q.versionCheck("1.10.0"))throw Error("SearchPane requires DataTables 1.10 or newer");if(!q.DateTime)throw Error("SearchPane requires DateTime");this.classes=f.extend(!0,{},d.classes);this.c=f.extend(!0,{},d.defaults,f.fn.dataTable.ext.searchBuilder,b);b=this.c.i18n;this.s={condition:void 0,conditions:{},data:void 0,dataIdx:-1,dataPoints:[],depth:h,dt:a,filled:!1,index:e,dateFormat:!1,topGroup:c,type:"",value:[]};this.dom={buttons:f("<div/>").addClass(this.classes.buttonContainer),
condition:f("<select disabled/>").addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic).attr("autocomplete","hacking"),conditionTitle:f('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.condition",b.condition)),container:f("<div/>").addClass(this.classes.container),data:f("<select/>").addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),dataTitle:f('<option value="" disabled selected hidden/>').text(this.s.dt.i18n("searchBuilder.data",
b.data)),defaultValue:f("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.select),"delete":f("<button>&times</button>").addClass(this.classes["delete"]).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.deleteTitle",b.deleteTitle)).attr("type","button"),left:f("<button><</button>").addClass(this.classes.left).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.leftTitle",b.leftTitle)).attr("type","button"),
right:f("<button>></button>").addClass(this.classes.right).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.rightTitle",b.rightTitle)).attr("type","button"),value:[f("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select)],valueTitle:f('<option value="--valueTitle--" selected/>').text(this.s.dt.i18n("searchBuilder.value",b.value))};if(this.c.greyscale){f(this.dom.data).addClass(this.classes.greyscale);
f(this.dom.condition).addClass(this.classes.greyscale);f(this.dom.defaultValue).addClass(this.classes.greyscale);a=0;for(c=this.dom.value;a<c.length;a++)f(c[a]).addClass(this.classes.greyscale)}this.s.dt.on("draw.dtsp",function(){j._adjustCriteria()});this.s.dt.on("buttons-action",function(){j._adjustCriteria()});f(window).on("resize.dtsp",q.util.throttle(function(){j._adjustCriteria()}));this._buildCriteria();return this};d.prototype.updateArrows=function(a,b){void 0===a&&(a=!1);void 0===b&&(b=!0);
f(this.dom.container).empty().append(this.dom.data).append(this.dom.condition).append(this.dom.value[0]);this.setListeners();f(this.dom.value[0]).trigger("dtsb-inserted");for(var c=1;c<this.dom.value.length;c++)f(this.dom.container).append(this.dom.value[c]),f(this.dom.value[c]).trigger("dtsb-inserted");1<this.s.depth&&f(this.dom.buttons).append(this.dom.left);(!1===this.c.depthLimit||this.s.depth<this.c.depthLimit)&&a?f(this.dom.buttons).append(this.dom.right):f(this.dom.right).remove();f(this.dom.buttons).append(this.dom["delete"]);
f(this.dom.container).append(this.dom.buttons);b&&this._adjustCriteria()};d.prototype.destroy=function(){f(this.dom.data).off(".dtsb");f(this.dom.condition).off(".dtsb");f(this.dom["delete"]).off(".dtsb");for(var a=0,b=this.dom.value;a<b.length;a++)f(b[a]).off(".dtsb");f(this.dom.container).remove()};d.prototype.search=function(a,b){var c=this.s.conditions[this.s.condition];if(void 0!==this.s.condition&&void 0!==c){var e=a[this.s.dataIdx];if(-1!==this.s.type.indexOf("num")&&(""!==this.s.dt.settings()[0].oLanguage.sDecimal||
""!==this.s.dt.settings()[0].oLanguage.sThousands)){e=[a[this.s.dataIdx]];""!==this.s.dt.settings()[0].oLanguage.sDecimal&&(e=a[this.s.dataIdx].split(this.s.dt.settings()[0].oLanguage.sDecimal));if(""!==this.s.dt.settings()[0].oLanguage.sThousands)for(var f=0;f<e.length;f++)e[f]=e[f].replace(this.s.dt.settings()[0].oLanguage.sThousands,",");e=e.join(".")}"filter"!==this.c.orthogonal.search&&(e=this.s.dt.settings()[0],e=e.oApi._fnGetCellData(e,b,this.s.dataIdx,"string"===typeof this.c.orthogonal?this.c.orthogonal:
this.c.orthogonal.search));if("array"===this.s.type){if(Array.isArray(e)||(e=[e]),e.sort(),null!==e)for(var f=0,d=e;f<d.length;f++)d[f].replace(/[\r\n\u2028]/g," ")}else null!==e&&(e=e.replace(/[\r\n\u2028]/g," "));-1!==this.s.type.indexOf("html")&&(e=e.replace(/(<([^>]+)>)/ig,""));null===e&&(e="");return c.search(e,this.s.value,this)}};d.prototype.getDetails=function(){var a=this.s.value;if(-1!==this.s.type.indexOf("num")&&(""!==this.s.dt.settings()[0].oLanguage.sDecimal||""!==this.s.dt.settings()[0].oLanguage.sThousands))for(var b=
0;b<this.s.value.length;b++){var c=[this.s.value[b].toString()];""!==this.s.dt.settings()[0].oLanguage.sDecimal&&(c=this.s.value[b].split(this.s.dt.settings()[0].oLanguage.sDecimal));if(""!==this.s.dt.settings()[0].oLanguage.sThousands)for(var e=0;e<c.length;e++)c[e]=c[e].replace(this.s.dt.settings()[0].oLanguage.sThousands,",");this.s.value[b]=c.join(".")}return{condition:this.s.condition,data:this.s.data,value:a}};d.prototype.getNode=function(){return this.dom.container};d.prototype.populate=function(){this._populateData();
-1!==this.s.dataIdx&&(this._populateCondition(),void 0!==this.s.condition&&this._populateValue())};d.prototype.rebuild=function(a){var b=!1,c;this._populateData();if(void 0!==a.data){var e=this.classes.italic,d=this.dom.data;f(this.dom.data).children("option").each(function(){f(this).text()===a.data&&(f(this).attr("selected",!0),f(d).removeClass(e),b=!0,c=f(this).val())})}if(b){this.s.data=a.data;this.s.dataIdx=c;this.c.orthogonal=this._getOptions().orthogonal;f(this.dom.dataTitle).remove();this._populateCondition();
f(this.dom.conditionTitle).remove();var j;f(this.dom.condition).children("option").each(function(){void 0!==a.condition&&(f(this).val()===a.condition&&"string"===typeof a.condition)&&(f(this).attr("selected",!0),j=f(this).val())});this.s.condition=j;void 0!==this.s.condition?(f(this.dom.conditionTitle).remove(),f(this.dom.condition).removeClass(this.classes.italic),this._populateValue(a)):f(this.dom.conditionTitle).prependTo(this.dom.condition).attr("selected",!0)}};d.prototype.setListeners=function(){var a=
this;f(this.dom.data).unbind("input change").on("input change",function(){f(a.dom.dataTitle).attr("selected",!1);f(a.dom.data).removeClass(a.classes.italic);a.s.dataIdx=f(a.dom.data).children("option:selected").val();a.s.data=f(a.dom.data).children("option:selected").text();a.c.orthogonal=a._getOptions().orthogonal;a._clearCondition();a._clearValue();a._populateCondition();a.s.filled&&(a.s.filled=!1,a.s.dt.draw(),a.setListeners());a.s.dt.state.save()});f(this.dom.condition).unbind("input change").on("input change",
function(){f(a.dom.conditionTitle).attr("selected",!1);f(a.dom.condition).removeClass(a.classes.italic);for(var b=f(a.dom.condition).children("option:selected").val(),c=0,e=Object.keys(a.s.conditions);c<e.length;c++)if(e[c]===b){a.s.condition=b;break}a._clearValue();a._populateValue();b=0;for(c=a.dom.value;b<c.length;b++)e=c[b],a.s.filled&&0!==f(a.dom.container).has(e).length&&(a.s.filled=!1,a.s.dt.draw(),a.setListeners());a.s.dt.draw()})};d.prototype._adjustCriteria=function(){if(0!==f(document).has(this.dom.container).length){var a,
b;a=this.dom.value[this.dom.value.length-1];if(0!==f(this.dom.container).has(a).length){b=f(a).outerWidth(!0);a=f(a).offset().left+b;var c=f(this.dom.left).offset(),e=f(this.dom.right).offset(),d=f(this.dom["delete"]).offset(),j=0!==f(this.dom.container).has(this.dom.left).length,g=0!==f(this.dom.container).has(this.dom.right).length,i=j?c.left:g?e.left:d.left;(15>i-a||j&&c.top!==d.top||g&&e.top!==d.top)&&!f(this.dom.container).parent().hasClass(this.classes.vertical)?(f(this.dom.container).parent().addClass(this.classes.vertical),
f(this.s.topGroup).trigger("dtsb-redrawContents")):15<i-(f(this.dom.data).offset().left+f(this.dom.data).outerWidth(!0)+f(this.dom.condition).outerWidth(!0)+b)&&f(this.dom.container).parent().hasClass(this.classes.vertical)&&(f(this.dom.container).parent().removeClass(this.classes.vertical),f(this.s.topGroup).trigger("dtsb-redrawContents"))}}};d.prototype._buildCriteria=function(){f(this.dom.data).append(this.dom.dataTitle);f(this.dom.condition).append(this.dom.conditionTitle);f(this.dom.container).append(this.dom.data).append(this.dom.condition);
for(var a=0,b=this.dom.value;a<b.length;a++){var c=b[a];f(c).append(this.dom.valueTitle);f(this.dom.container).append(c)}f(this.dom.container).append(this.dom["delete"]).append(this.dom.right);this.setListeners()};d.prototype._clearCondition=function(){f(this.dom.condition).empty();f(this.dom.conditionTitle).attr("selected",!0).attr("disabled",!0);f(this.dom.condition).prepend(this.dom.conditionTitle).prop("selectedIndex",0);this.s.conditions={};this.s.condition=void 0};d.prototype._clearValue=function(){if(void 0!==
this.s.condition){for(var a=function(a){setTimeout(function(){f(a).remove()},50)},b=0,c=this.dom.value;b<c.length;b++){var e=c[b];a(e)}this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,d.updateListener));f(this.dom.value[0]).insertAfter(this.dom.condition).trigger("dtsb-inserted");for(e=1;e<this.dom.value.length;e++)f(this.dom.value[e]).insertAfter(this.dom.value[e-1]).trigger("dtsb-inserted")}else{a=function(a){setTimeout(function(){f(a).remove()},50)};b=0;for(c=this.dom.value;b<
c.length;b++)e=c[b],a(e);f(this.dom.valueTitle).attr("selected",!0);f(this.dom.defaultValue).append(this.dom.valueTitle).insertAfter(this.dom.condition)}this.s.value=[];this.dom.value=[f("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select).append(f(this.dom.valueTitle).clone())]};d.prototype._getOptions=function(){return f.extend(!0,{},d.defaults,this.s.dt.settings()[0].aoColumns[this.s.dataIdx].searchBuilder)};
d.prototype._populateCondition=function(){var a=[],b=Object.keys(this.s.conditions).length;if(0===b){b=f(this.dom.data).children("option:selected").val();this.s.type=this.s.dt.columns().type().toArray()[b];null===this.s.type&&(this.s.dt.draw(),this.setListeners(),this.s.type=this.s.dt.columns().type().toArray()[b]);f(this.dom.condition).attr("disabled",!1).empty().append(this.dom.conditionTitle).addClass(this.classes.italic);f(this.dom.conditionTitle).attr("selected",!0);b=this.s.dt.settings()[0].oLanguage.sDecimal;
""!==b&&this.s.type.indexOf(b)===this.s.type.length-b.length&&(-1!==this.s.type.indexOf("num-fmt")?this.s.type=this.s.type.replace(b,""):-1!==this.s.type.indexOf("num")&&(this.s.type=this.s.type.replace(b,"")));var c=void 0!==this.c.conditions[this.s.type]?this.c.conditions[this.s.type]:-1!==this.s.type.indexOf("moment")?this.c.conditions.moment:-1!==this.s.type.indexOf("luxon")?this.c.conditions.luxon:this.c.conditions.string;-1!==this.s.type.indexOf("moment")?this.s.dateFormat=this.s.type.replace(/moment\-/g,
""):-1!==this.s.type.indexOf("luxon")&&(this.s.dateFormat=this.s.type.replace(/luxon\-/g,""));for(var e=0,d=Object.keys(c);e<d.length;e++){var j=d[e];null!==c[j]&&(this.s.conditions[j]=c[j],b=c[j].conditionName,"function"===typeof b&&(b=b(this.s.dt,this.c.i18n)),a.push(f("<option>",{text:b,value:j}).addClass(this.classes.option).addClass(this.classes.notItalic)))}}else if(0<b){f(this.dom.condition).empty().attr("disabled",!1).addClass(this.classes.italic);c=0;for(e=Object.keys(this.s.conditions);c<
e.length;c++)j=e[c],b=this.s.conditions[j].conditionName,"function"===typeof b&&(b=b(this.s.dt,this.c.i18n)),j=f("<option>",{text:b,value:j}).addClass(this.classes.option).addClass(this.classes.notItalic),void 0!==this.s.condition&&this.s.condition===b&&(f(j).attr("selected",!0),f(this.dom.condition).removeClass(this.classes.italic)),a.push(j)}else{f(this.dom.condition).attr("disabled",!0).addClass(this.classes.italic);return}for(b=0;b<a.length;b++)j=a[b],f(this.dom.condition).append(j);f(this.dom.condition).prop("selectedIndex",
0)};d.prototype._populateData=function(){var a=this;f(this.dom.data).empty().append(this.dom.dataTitle);if(0===this.s.dataPoints.length)this.s.dt.columns().every(function(b){if(!0===a.c.columns||-1!==a.s.dt.columns(a.c.columns).indexes().toArray().indexOf(b)){for(var c=!1,e=0,d=a.s.dataPoints;e<d.length;e++)if(d[e].index===b){c=!0;break}c||(b={text:a.s.dt.settings()[0].aoColumns[b].sTitle.replace(/(<([^>]+)>)/ig,""),index:b},a.s.dataPoints.push(b),f(a.dom.data).append(f("<option>",{text:b.text,value:b.index}).addClass(a.classes.option).addClass(a.classes.notItalic)))}});
else for(var b=function(b){c.s.dt.columns().every(function(c){a.s.dt.settings()[0].aoColumns[c].sTitle===b.text&&(b.index=c)});var e=f("<option>",{text:b.text.replace(/(<([^>]+)>)/ig,""),value:b.index}).addClass(c.classes.option).addClass(c.classes.notItalic);c.s.data===b.text&&(c.s.dataIdx=b.index,f(e).attr("selected",!0),f(c.dom.data).removeClass(c.classes.italic));f(c.dom.data).append(e)},c=this,e=0,d=this.s.dataPoints;e<d.length;e++)b(d[e])};d.prototype._populateValue=function(a){var b=this,c=
this.s.filled;this.s.filled=!1;setTimeout(function(){f(b.dom.defaultValue).remove()},50);for(var e=function(a){setTimeout(function(){f(a).remove()},50)},h=0,j=this.dom.value;h<j.length;h++)e(j[h]);e=f(this.dom.container).children();if(3<e.length)for(h=2;h<e.length-1;h++)f(e[h]).remove();void 0!==a&&this.s.dt.columns().every(function(c){b.s.dt.settings()[0].aoColumns[c].sTitle===a.data&&(b.s.dataIdx=c)});this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,d.updateListener,void 0!==
a?a.value:void 0));void 0!==a&&void 0!==a.value&&(this.s.value=a.value);f(this.dom.value[0]).insertAfter(this.dom.condition).trigger("dtsb-inserted");for(h=1;h<this.dom.value.length;h++)f(this.dom.value[h]).insertAfter(this.dom.value[h-1]).trigger("dtsb-inserted");this.s.filled=this.s.conditions[this.s.condition].isInputValid(this.dom.value,this);this.setListeners();c!==this.s.filled&&(this.s.dt.draw(),this.setListeners())};d.version="1.0.0";d.classes={button:"dtsb-button",buttonContainer:"dtsb-buttonContainer",
condition:"dtsb-condition",container:"dtsb-criteria",data:"dtsb-data","delete":"dtsb-delete",dropDown:"dtsb-dropDown",greyscale:"dtsb-greyscale",input:"dtsb-input",italic:"dtsb-italic",joiner:"dtsp-joiner",left:"dtsb-left",notItalic:"dtsb-notItalic",option:"dtsb-option",right:"dtsb-right",select:"dtsb-select",value:"dtsb-value",vertical:"dtsb-vertical"};d.initSelect=function(a,b,c,e){void 0===c&&(c=null);void 0===e&&(e=!1);var h=f(a.dom.data).children("option:selected").val(),j=a.s.dt.rows().indexes().toArray(),
g=a.s.dt.settings()[0],i=f("<select/>").addClass(d.classes.value).addClass(d.classes.dropDown).addClass(d.classes.italic).addClass(d.classes.select).append(a.dom.valueTitle).on("input change",function(){f(this).removeClass(d.classes.italic);b(a,this)});a.c.greyscale&&f(i).addClass(d.classes.greyscale);for(var k=[],l=[],m=0;m<j.length;m++){var o=j[m],p=g.oApi._fnGetCellData(g,o,h,"string"===typeof a.c.orthogonal?a.c.orthogonal:a.c.orthogonal.search),p="string"===typeof p?p.replace(/[\r\n\u2028]/g,
" "):p,o=g.oApi._fnGetCellData(g,o,h,"string"===typeof a.c.orthogonal?a.c.orthogonal:a.c.orthogonal.display);"array"===a.s.type&&(p=!Array.isArray(p)?[p]:p=p.sort(),o=!Array.isArray(o)?[o]:o=o.sort());var q=function(b,e){var h=f("<option>",{type:Array.isArray(b)?"Array":"String",value:a.s.type.indexOf("html")!==-1&&b!==null&&typeof b==="string"?b.replace(/(<([^>]+)>)/ig,""):b}).addClass(a.classes.option).addClass(a.classes.notItalic).html(typeof e==="string"?e.replace(/(<([^>]+)>)/ig,""):e),g=f(h).val();
if(k.indexOf(g)===-1){k.push(g);l.push(h);c!==null&&Array.isArray(c[0])&&(c[0]=c[0].sort().join(","));if(c!==null&&h.val()===c[0]){h.attr("selected",true);f(i).removeClass(d.classes.italic)}}};if(e)for(var r=0;r<p.length;r++)q(p[r],o[r]);else q(p,o)}l.sort(function(b,c){if("array"===a.s.type||"string"===a.s.type||"num"===a.s.type||"html"===a.s.type||"html-num"===a.s.type)return f(b).val()<f(c).val()?-1:f(b).val()<f(c).val()?1:0;if("num-fmt"===a.s.type||"html-num-fmt"===a.s.type)return+f(b).val().replace(/[^0-9.]/g,
"")<+f(c).val().replace(/[^0-9.]/g,"")?-1:+f(b).val().replace(/[^0-9.]/g,"")<+f(c).val().replace(/[^0-9.]/g,"")?1:0});for(e=0;e<l.length;e++)h=l[e],f(i).append(h);return i};d.initSelectArray=function(a,b,c){void 0===c&&(c=null);return d.initSelect(a,b,c,!0)};d.initInput=function(a,b,c){var e=this;void 0===c&&(c=null);var h=a.s.dt.settings()[0].searchDelay,h=f("<input/>").addClass(d.classes.value).addClass(d.classes.input).on("input",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,
this)},h):function(){b(a,e)});a.c.greyscale&&f(h).addClass(d.classes.greyscale);null!==c&&f(h).val(c[0]);a.s.dt.one("draw",function(){f(a.s.topGroup).trigger("dtsb-redrawLogic")});return h};d.init2Input=function(a,b,c){var e=this;void 0===c&&(c=null);var h=a.s.dt.settings()[0].searchDelay,h=[f("<input/>").addClass(d.classes.value).addClass(d.classes.input).on("input",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,this)},h):function(){b(a,e)}),f("<span>").addClass(a.classes.joiner).text(a.s.dt.i18n("searchBuilder.valueJoiner",
a.c.i18n.valueJoiner)),f("<input/>").addClass(d.classes.value).addClass(d.classes.input).on("input",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,this)},h):function(){b(a,e)})];a.c.greyscale&&(f(h[0]).addClass(d.classes.greyscale),f(h[2]).addClass(d.classes.greyscale));null!==c&&(f(h[0]).val(c[0]),f(h[2]).val(c[1]));a.s.dt.one("draw",function(){f(a.s.topGroup).trigger("dtsb-redrawLogic")});return h};d.initDate=function(a,b,c){var e=this;void 0===c&&(c=null);var h=a.s.dt.settings()[0].searchDelay,
h=f("<input/>").addClass(d.classes.value).addClass(d.classes.input).dtDateTime({attachTo:"input",format:a.s.dateFormat?a.s.dateFormat:void 0}).on("input change",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,this)},h):function(){b(a,e)});a.c.greyscale&&f(h).addClass(d.classes.greyscale);null!==c&&f(h).val(c[0]);a.s.dt.one("draw",function(){f(a.s.topGroup).trigger("dtsb-redrawLogic")});return h};d.initNoValue=function(a){a.s.dt.one("draw",function(){f(a.s.topGroup).trigger("dtsb-redrawLogic")})};
d.init2Date=function(a,b,c){var e=this;void 0===c&&(c=null);var h=a.s.dt.settings()[0].searchDelay,h=[f("<input/>").addClass(d.classes.value).addClass(d.classes.input).dtDateTime({attachTo:"input",format:a.s.dateFormat?a.s.dateFormat:void 0}).on("input change",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,this)},h):function(){b(a,e)}),f("<span>").addClass(a.classes.joiner).text(a.s.dt.i18n("searchBuilder.valueJoiner",a.c.i18n.valueJoiner)),f("<input/>").addClass(d.classes.value).addClass(d.classes.input).dtDateTime({attachTo:"input",
format:a.s.dateFormat?a.s.dateFormat:void 0}).on("input change",null!==h?a.s.dt.settings()[0].oApi._fnThrottle(function(){return b(a,this)},h):function(){b(a,e)})];a.c.greyscale&&(f(h[0]).addClass(d.classes.greyscale),f(h[2]).addClass(d.classes.greyscale));null!==c&&0<c.length&&(f(h[0]).val(c[0]),f(h[2]).val(c[1]));a.s.dt.one("draw",function(){f(a.s.topGroup).trigger("dtsb-redrawLogic")});return h};d.isInputValidSelect=function(a){for(var b=!0,c=0;c<a.length;c++){var e=a[c];f(e).children("option:selected").length===
f(e).children("option").length-f(e).children("option."+d.classes.notItalic).length&&(1===f(e).children("option:selected").length&&f(e).children("option:selected")[0]===f(e).children("option:hidden")[0])&&(b=!1)}return b};d.isInputValidInput=function(a){for(var b=!0,c=0;c<a.length;c++){var e=a[c];f(e).is("input")&&0===f(e).val().length&&(b=!1)}return b};d.inputValueSelect=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];if(f(e).is("select")){var d=f(e).children("option:selected").val();b.push("Array"===
f(e).children("option:selected").attr("type")?d.split(",").sort():d)}}return b};d.inputValueInput=function(a){for(var b=[],c=0;c<a.length;c++){var e=a[c];f(e).is("input")&&b.push(f(e).val())}return b};d.updateListener=function(a,b){var c=a.s.conditions[a.s.condition];a.s.filled=c.isInputValid(a.dom.value,a);a.s.value=c.inputValue(a.dom.value,a);Array.isArray(a.s.value)||(a.s.value=[a.s.value]);for(c=0;c<a.s.value.length;c++)if(Array.isArray(a.s.value[c]))a.s.value[c].sort();else if(-1!==a.s.type.indexOf("num")&&
(""!==a.s.dt.settings()[0].oLanguage.sDecimal||""!==a.s.dt.settings()[0].oLanguage.sThousands)){var e=[a.s.value[c].toString()];""!==a.s.dt.settings()[0].oLanguage.sDecimal&&(e=a.s.value[c].split(a.s.dt.settings()[0].oLanguage.sDecimal));if(""!==a.s.dt.settings()[0].oLanguage.sThousands)for(var d=0;d<e.length;d++)e[d]=e[d].replace(a.s.dt.settings()[0].oLanguage.sThousands,",");a.s.value[c]=e.join(".")}d=e=null;for(c=0;c<a.dom.value.length;c++)b===a.dom.value[c][0]&&(e=c,void 0!==b.selectionStart&&
(d=b.selectionStart));a.s.dt.draw();null!==e&&(f(a.dom.value[e]).removeClass(a.classes.italic),f(a.dom.value[e]).focus(),null!==d&&f(a.dom.value[e])[0].setSelectionRange(d,d))};d.dateConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.equals",b.conditions.date.equals)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return a===b[0]}},"!=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.not",
b.conditions.date.not)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return a!==b[0]}},"<":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.before",b.conditions.date.before)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return a<b[0]}},">":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.after",
b.conditions.date.after)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return a>b[0]}},between:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.between",b.conditions.date.between)},init:d.init2Date,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return b[0]<b[1]?b[0]<=a&&a<=b[1]:b[1]<=a&&a<=b[0]}},"!between":{conditionName:function(a,
b){return a.i18n("searchBuilder.conditions.date.notBetween",b.conditions.date.notBetween)},init:d.init2Date,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){a=a.replace(/(\/|\-|\,)/g,"-");return b[0]<b[1]?!(b[0]<=a&&a<=b[1]):!(b[1]<=a&&a<=b[0])}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.empty",b.conditions.date.empty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return null===
a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.notEmpty",b.conditions.date.notEmpty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.momentDateConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.equals",b.conditions.date.equals)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,
search:function(a,b,c){return o(a,c.s.dateFormat).valueOf()===o(b[0],c.s.dateFormat).valueOf()}},"!=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.not",b.conditions.date.not)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return o(a,c.s.dateFormat).valueOf()!==o(b[0],c.s.dateFormat).valueOf()}},"<":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.before",b.conditions.date.before)},init:d.initDate,
inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return o(a,c.s.dateFormat).valueOf()<o(b[0],c.s.dateFormat).valueOf()}},">":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.after",b.conditions.date.after)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return o(a,c.s.dateFormat).valueOf()>o(b[0],c.s.dateFormat).valueOf()}},between:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.between",
b.conditions.date.between)},init:d.init2Date,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){var a=o(a,c.s.dateFormat).valueOf(),e=o(b[0],c.s.dateFormat).valueOf(),b=o(b[1],c.s.dateFormat).valueOf();return e<b?e<=a&&a<=b:b<=a&&a<=e}},"!between":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.notBetween",b.conditions.date.notBetween)},init:d.init2Date,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){var a=
o(a,c.s.dateFormat).valueOf(),e=o(b[0],c.s.dateFormat).valueOf(),b=o(b[1],c.s.dateFormat).valueOf();return e<b?!(+e<=+a&&+a<=+b):!(+b<=+a&&+a<=+e)}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.empty",b.conditions.date.empty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return null===a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.notEmpty",b.conditions.date.notEmpty)},
isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.luxonDateConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.equals",b.conditions.date.equals)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return p.DateTime.fromFormat(a,c.s.dateFormat).ts===p.DateTime.fromFormat(b[0],c.s.dateFormat).ts}},"!=":{conditionName:function(a,
b){return a.i18n("searchBuilder.conditions.date.not",b.conditions.date.not)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return p.DateTime.fromFormat(a,c.s.dateFormat).ts!==p.DateTime.fromFormat(b[0],c.s.dateFormat).ts}},"<":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.before",b.conditions.date.before)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return p.DateTime.fromFormat(a,
c.s.dateFormat).ts<p.DateTime.fromFormat(b[0],c.s.dateFormat).ts}},">":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.after",b.conditions.date.after)},init:d.initDate,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){return p.DateTime.fromFormat(a,c.s.dateFormat).ts>p.DateTime.fromFormat(b[0],c.s.dateFormat).ts}},between:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.between",b.conditions.date.between)},init:d.init2Date,
inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){var a=p.DateTime.fromFormat(a,c.s.dateFormat).ts,e=p.DateTime.fromFormat(b[0],c.s.dateFormat).ts,b=p.DateTime.fromFormat(b[1],c.s.dateFormat).ts;return e<b?e<=a&&a<=b:b<=a&&a<=e}},"!between":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.notBetween",b.conditions.date.notBetween)},init:d.init2Date,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b,c){var a=
p.DateTime.fromFormat(a,c.s.dateFormat).ts,e=p.DateTime.fromFormat(b[0],c.s.dateFormat).ts,b=p.DateTime.fromFormat(b[1],c.s.dateFormat).ts;return e<b?!(+e<=+a&&+a<=+b):!(+b<=+a&&+a<=+e)}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.empty",b.conditions.date.empty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return null===a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.date.notEmpty",
b.conditions.date.notEmpty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.numConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.equals",b.conditions.number.equals)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){return+a===+b[0]}},"!=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.not",
b.conditions.number.not)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){return+a!==+b[0]}},"<":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.lt",b.conditions.number.lt)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return+a<+b[0]}},"<=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.lte",b.conditions.number.lte)},init:d.initInput,
inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return+a<=+b[0]}},">=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.gte",b.conditions.number.gte)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return+a>=+b[0]}},">":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.gt",b.conditions.number.gt)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,
search:function(a,b){return+a>+b[0]}},between:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.between",b.conditions.number.between)},init:d.init2Input,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return+b[0]<+b[1]?+b[0]<=+a&&+a<=+b[1]:+b[1]<=+a&&+a<=+b[0]}},"!between":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.notBetween",b.conditions.number.notBetween)},init:d.init2Input,inputValue:d.inputValueInput,
isInputValid:d.isInputValidInput,search:function(a,b){return+b[0]<+b[1]?!(+b[0]<=+a&&+a<=+b[1]):!(+b[1]<=+a&&+a<=+b[0])}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.empty",b.conditions.number.empty)},init:d.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(a){return null===a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.notEmpty",b.conditions.number.notEmpty)},
isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.numFmtConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.equals",b.conditions.number.equals)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,
""):b[0].replace(/[^0-9.]/g,"");return+c===+e}},"!=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.not",b.conditions.number.not)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,"");return+c!==+e}},"<":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.lt",
b.conditions.number.lt)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,"");return+c<+e}},"<=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.lte",b.conditions.number.lte)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,
b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,"");return+c<=+e}},">=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.gte",b.conditions.number.gte)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,
""):b[0].replace(/[^0-9.]/g,"");return+c>=+e}},">":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.gt",b.conditions.number.gt)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,"");return+c>+e}},between:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.between",
b.conditions.number.between)},init:d.init2Input,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,""),d=0===b[1].indexOf("-")?"-"+b[1].replace(/[^0-9.]/g,""):b[1].replace(/[^0-9.]/g,"");return+e<+d?+e<=+c&&+c<=+d:+d<=+c&&+c<=+e}},"!between":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.notBetween",
b.conditions.number.notBetween)},init:d.init2Input,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){var c=0===a.indexOf("-")?"-"+a.replace(/[^0-9.]/g,""):a.replace(/[^0-9.]/g,""),e=0===b[0].indexOf("-")?"-"+b[0].replace(/[^0-9.]/g,""):b[0].replace(/[^0-9.]/g,""),d=0===b[1].indexOf("-")?"-"+b[1].replace(/[^0-9.]/g,""):b[1].replace(/[^0-9.]/g,"");return+e<+d?!(+e<=+c&&+c<=+d):!(+d<=+c&&+c<=+e)}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.empty",
b.conditions.number.empty)},init:d.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(a){return null===a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.number.notEmpty",b.conditions.number.notEmpty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.stringConditions={"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.equals",
b.conditions.string.equals)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){return a===b[0]}},"!=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.not",b.conditions.string.not)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidInput,search:function(a,b){return a!==b[0]}},starts:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.startsWith",b.conditions.string.startsWith)},
init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return 0===a.toLowerCase().indexOf(b[0].toLowerCase())}},contains:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.contains",b.conditions.string.contains)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return-1!==a.toLowerCase().indexOf(b[0].toLowerCase())}},ends:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.endsWith",
b.conditions.string.endsWith)},init:d.initInput,inputValue:d.inputValueInput,isInputValid:d.isInputValidInput,search:function(a,b){return a.toLowerCase().endsWith(b[0].toLowerCase())}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.empty",b.conditions.string.empty)},init:d.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(a){return null===a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.string.notEmpty",
b.conditions.string.notEmpty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return!(null===a||void 0===a||0===a.length)}}};d.arrayConditions={contains:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.array.contains",b.conditions.array.contains)},init:d.initSelectArray,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){return-1!==a.indexOf(b[0])}},without:{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.array.without",
b.conditions.array.without)},init:d.initSelectArray,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){return-1===a.indexOf(b[0])}},"=":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.array.equals",b.conditions.array.equals)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){if(a.length===b[0].length){for(var c=0;c<a.length;c++)if(a[c]!==b[0][c])return!1;return!0}return!1}},"!=":{conditionName:function(a,
b){return a.i18n("searchBuilder.conditions.array.not",b.conditions.array.not)},init:d.initSelect,inputValue:d.inputValueSelect,isInputValid:d.isInputValidSelect,search:function(a,b){if(a.length===b[0].length){for(var c=0;c<a.length;c++)if(a[c]!==b[0][c])return!0;return!1}return!0}},"null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.array.empty",b.conditions.array.empty)},init:d.initNoValue,isInputValid:function(){return!0},inputValue:function(){},search:function(a){return null===
a||void 0===a||0===a.length}},"!null":{conditionName:function(a,b){return a.i18n("searchBuilder.conditions.array.notEmpty",b.conditions.array.notEmpty)},isInputValid:function(){return!0},init:d.initNoValue,inputValue:function(){},search:function(a){return null!==a&&void 0!==a&&0!==a.length}}};d.defaults={columns:!0,conditions:{array:d.arrayConditions,date:d.dateConditions,html:d.stringConditions,"html-num":d.numConditions,"html-num-fmt":d.numFmtConditions,luxon:d.luxonDateConditions,moment:d.momentDateConditions,
num:d.numConditions,"num-fmt":d.numFmtConditions,string:d.stringConditions},depthLimit:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{"0":"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",deleteTitle:"Delete filtering rule",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{"0":"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",
search:"filter"},preDefined:!1};l=d;var g,t,u,k=function(a,b,c,e,d,f){void 0===e&&(e=0);void 0===d&&(d=!1);void 0===f&&(f=1);if(!t||!t.versionCheck||!t.versionCheck("1.10.0"))throw Error("SearchBuilder requires DataTables 1.10 or newer");if(!t.DateTime)throw Error("SearchPane requires DateTime");this.classes=g.extend(!0,{},k.classes);this.c=g.extend(!0,{},k.defaults,b);this.s={criteria:[],depth:f,dt:a,index:e,isChild:d,logic:void 0,opts:b,toDrop:void 0,topGroup:c};this.dom={add:g("<button/>").addClass(this.classes.add).addClass(this.classes.button).attr("type",
"button"),clear:g("<button>&times</button>").addClass(this.classes.button).addClass(this.classes.clearGroup).attr("type","button"),container:g("<div/>").addClass(this.classes.group),logic:g("<button/>").addClass(this.classes.logic).addClass(this.classes.button).attr("type","button"),logicContainer:g("<div/>").addClass(this.classes.logicContainer)};void 0===this.s.topGroup&&(this.s.topGroup=this.dom.container);this._setup();return this};k.prototype.destroy=function(){g(this.dom.add).off(".dtsb");g(this.dom.logic).off(".dtsb");
g(this.dom.container).trigger("dtsb-destroy").remove();this.s.criteria=[]};k.prototype.getDetails=function(){if(0===this.s.criteria.length)return{};for(var a={criteria:[],logic:this.s.logic},b=0,c=this.s.criteria;b<c.length;b++)a.criteria.push(c[b].criteria.getDetails());return a};k.prototype.getNode=function(){return this.dom.container};k.prototype.rebuild=function(a){if(!(void 0===a.criteria||null===a.criteria||0===a.criteria.length)){this.s.logic=a.logic;g(this.dom.logic).text("OR"===this.s.logic?
this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd));for(var b=0,c=a.criteria;b<c.length;b++)a=c[b],void 0!==a.logic?this._addPrevGroup(a):void 0===a.logic&&this._addPrevCriteria(a);b=0;for(c=this.s.criteria;b<c.length;b++)a=c[b],a.criteria instanceof l&&(a.criteria.updateArrows(1<this.s.criteria.length,!1),this._setCriteriaListeners(a.criteria))}};k.prototype.redrawContents=function(){g(this.dom.container).empty().append(this.dom.logicContainer).append(this.dom.add);
this.s.criteria.sort(function(a,b){return a.criteria.s.index<b.criteria.s.index?-1:a.criteria.s.index>b.criteria.s.index?1:0});this.setListeners();for(var a=0;a<this.s.criteria.length;a++){var b=this.s.criteria[a].criteria;b instanceof l?(this.s.criteria[a].index=a,this.s.criteria[a].criteria.s.index=a,g(this.s.criteria[a].criteria.dom.container).insertBefore(this.dom.add),this._setCriteriaListeners(b),this.s.criteria[a].criteria.rebuild(this.s.criteria[a].criteria.getDetails())):b instanceof k&&
0<b.s.criteria.length?(this.s.criteria[a].index=a,this.s.criteria[a].criteria.s.index=a,g(this.s.criteria[a].criteria.dom.container).insertBefore(this.dom.add),b.redrawContents(),this._setGroupListeners(b)):(this.s.criteria.splice(a,1),a--)}this.setupLogic()};k.prototype.redrawLogic=function(){for(var a=0,b=this.s.criteria;a<b.length;a++){var c=b[a];c instanceof k&&c.redrawLogic()}this.setupLogic()};k.prototype.search=function(a,b){return"AND"===this.s.logic?this._andSearch(a,b):"OR"===this.s.logic?
this._orSearch(a,b):!0};k.prototype.setupLogic=function(){g(this.dom.logicContainer).remove();g(this.dom.clear).remove();if(1>this.s.criteria.length)this.s.isChild||(g(this.dom.container).trigger("dtsb-destroy"),g(this.dom.container).css("margin-left",0));else{var a=g(this.dom.container).height()-1;g(this.dom.clear).height("0px");g(this.dom.logicContainer).append(this.dom.clear).width(a);g(this.dom.container).prepend(this.dom.logicContainer);this._setLogicListener();g(this.dom.container).css("margin-left",
g(this.dom.logicContainer).outerHeight(!0));var a=g(this.dom.logicContainer).offset(),b=a.left,c=g(this.dom.container).offset().left,b=b-(b-c)-g(this.dom.logicContainer).outerHeight(!0);g(this.dom.logicContainer).offset({left:b});b=g(this.dom.logicContainer).next();a=a.top;b=g(b).offset().top;a-=a-b;g(this.dom.logicContainer).offset({top:a});g(this.dom.clear).outerHeight(g(this.dom.logicContainer).height());this._setClearListener()}};k.prototype.setListeners=function(){var a=this;g(this.dom.add).unbind("click");
g(this.dom.add).on("click",function(){a.s.isChild||g(a.dom.container).prepend(a.dom.logicContainer);a.addCriteria();g(a.dom.container).trigger("dtsb-add");a.s.dt.state.save();return!1});for(var b=0,c=this.s.criteria;b<c.length;b++)c[b].criteria.setListeners();this._setClearListener();this._setLogicListener()};k.prototype.addCriteria=function(a,b){void 0===a&&(a=null);void 0===b&&(b=!0);var c=null===a?this.s.criteria.length:a.s.index,e=new l(this.s.dt,this.s.opts,this.s.topGroup,c,this.s.depth);null!==
a&&(e.c=a.c,e.s=a.s,e.s.depth=this.s.depth,e.classes=a.classes);e.populate();for(var d=!1,f=0;f<this.s.criteria.length;f++)0===f&&this.s.criteria[f].criteria.s.index>e.s.index?(g(e.getNode()).insertBefore(this.s.criteria[f].criteria.dom.container),d=!0):f<this.s.criteria.length-1&&(this.s.criteria[f].criteria.s.index<e.s.index&&this.s.criteria[f+1].criteria.s.index>e.s.index)&&(g(e.getNode()).insertAfter(this.s.criteria[f].criteria.dom.container),d=!0);d||g(e.getNode()).insertBefore(this.dom.add);
this.s.criteria.push({criteria:e,index:c});this.s.criteria=this.s.criteria.sort(function(a,b){return a.criteria.s.index-b.criteria.s.index});c=0;for(d=this.s.criteria;c<d.length;c++)f=d[c],f.criteria instanceof l&&f.criteria.updateArrows(1<this.s.criteria.length,b);this._setCriteriaListeners(e);e.setListeners();this.setupLogic()};k.prototype.checkFilled=function(){for(var a=0,b=this.s.criteria;a<b.length;a++){var c=b[a];if(c.criteria instanceof l&&c.criteria.s.filled||c.criteria instanceof k&&c.criteria.checkFilled())return!0}return!1};
k.prototype.count=function(){for(var a=0,b=0,c=this.s.criteria;b<c.length;b++){var e=c[b];e.criteria instanceof k?a+=e.criteria.count():a++}return a};k.prototype._addPrevGroup=function(a){var b=this.s.criteria.length,c=new k(this.s.dt,this.c,this.s.topGroup,b,!0,this.s.depth+1);this.s.criteria.push({criteria:c,index:b,logic:c.s.logic});c.rebuild(a);this.s.criteria[b].criteria=c;g(this.s.topGroup).trigger("dtsb-redrawContents");this._setGroupListeners(c)};k.prototype._addPrevCriteria=function(a){var b=
this.s.criteria.length,c=new l(this.s.dt,this.s.opts,this.s.topGroup,b,this.s.depth);c.populate();this.s.criteria.push({criteria:c,index:b});c.rebuild(a);this.s.criteria[b].criteria=c;g(this.s.topGroup).trigger("dtsb-redrawContents")};k.prototype._andSearch=function(a,b){if(0===this.s.criteria.length)return!0;for(var c=0,e=this.s.criteria;c<e.length;c++){var d=e[c];if((!(d.criteria instanceof l)||d.criteria.s.filled)&&!d.criteria.search(a,b))return!1}return!0};k.prototype._orSearch=function(a,b){if(0===
this.s.criteria.length)return!0;for(var c=!1,e=0,d=this.s.criteria;e<d.length;e++){var f=d[e];if(f.criteria instanceof l&&f.criteria.s.filled){if(c=!0,f.criteria.search(a,b))return!0}else if(f.criteria instanceof k&&f.criteria.checkFilled()&&(c=!0,f.criteria.search(a,b)))return!0}return!c};k.prototype._removeCriteria=function(a,b){void 0===b&&(b=!1);if(1>=this.s.criteria.length&&this.s.isChild)this.destroy();else{for(var c=void 0,e=0;e<this.s.criteria.length;e++)if(this.s.criteria[e].index===a.s.index&&
(!b||this.s.criteria[e].criteria instanceof k))c=e;void 0!==c&&this.s.criteria.splice(c,1);for(e=0;e<this.s.criteria.length;e++)this.s.criteria[e].index=e,this.s.criteria[e].criteria.s.index=e}};k.prototype._setCriteriaListeners=function(a){var b=this;g(a.dom["delete"]).unbind("click").on("click",function(){b._removeCriteria(a);g(a.dom.container).remove();for(var c=0,e=b.s.criteria;c<e.length;c++){var d=e[c];d.criteria instanceof l&&d.criteria.updateArrows(1<b.s.criteria.length)}a.destroy();b.s.dt.draw();
g(b.s.topGroup).trigger("dtsb-redrawContents");g(b.s.topGroup).trigger("dtsb-updateTitle");return!1});g(a.dom.right).unbind("click").on("click",function(){var c=a.s.index,e=new k(b.s.dt,b.s.opts,b.s.topGroup,a.s.index,!0,b.s.depth+1);e.addCriteria(a);b.s.criteria[c].criteria=e;b.s.criteria[c].logic="AND";g(b.s.topGroup).trigger("dtsb-redrawContents");b._setGroupListeners(e);return!1});g(a.dom.left).unbind("click").on("click",function(){b.s.toDrop=new l(b.s.dt,b.s.opts,b.s.topGroup,a.s.index);b.s.toDrop.s=
a.s;b.s.toDrop.c=a.c;b.s.toDrop.classes=a.classes;b.s.toDrop.populate();var c=b.s.toDrop.s.index;g(b.dom.container).trigger("dtsb-dropCriteria");a.s.index=c;b._removeCriteria(a);g(b.s.topGroup).trigger("dtsb-redrawContents");b.s.dt.draw();return!1})};k.prototype._setClearListener=function(){var a=this;g(this.dom.clear).unbind("click").on("click",function(){if(!a.s.isChild)return g(a.dom.container).trigger("dtsb-clearContents"),!1;a.destroy();g(a.s.topGroup).trigger("dtsb-updateTitle");g(a.s.topGroup).trigger("dtsb-redrawContents");
return!1})};k.prototype._setGroupListeners=function(a){var b=this;g(a.dom.add).unbind("click").on("click",function(){b.setupLogic();g(b.dom.container).trigger("dtsb-add");return!1});g(a.dom.container).unbind("dtsb-add").on("dtsb-add",function(){b.setupLogic();g(b.dom.container).trigger("dtsb-add");return!1});g(a.dom.container).unbind("dtsb-destroy").on("dtsb-destroy",function(){b._removeCriteria(a,!0);g(a.dom.container).remove();b.setupLogic();return!1});g(a.dom.container).unbind("dtsb-dropCriteria").on("dtsb-dropCriteria",
function(){var c=a.s.toDrop;c.s.index=a.s.index;c.updateArrows(1<b.s.criteria.length,!1);b.addCriteria(c,!1);return!1});a.setListeners()};k.prototype._setup=function(){this.setListeners();g(this.dom.add).text(this.s.dt.i18n("searchBuilder.add",this.c.i18n.add));g(this.dom.logic).text("OR"===this.c.logic?this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd));this.s.logic="OR"===this.c.logic?"OR":"AND";this.c.greyscale&&g(this.dom.logic).addClass(this.classes.greyscale);
g(this.dom.logicContainer).append(this.dom.logic).append(this.dom.clear);this.s.isChild&&g(this.dom.container).append(this.dom.logicContainer);g(this.dom.container).append(this.dom.add)};k.prototype._setLogicListener=function(){var a=this;g(this.dom.logic).unbind("click").on("click",function(){a._toggleLogic();a.s.dt.draw();for(var b=0,c=a.s.criteria;b<c.length;b++)c[b].criteria.setListeners()})};k.prototype._toggleLogic=function(){"OR"===this.s.logic?(this.s.logic="AND",g(this.dom.logic).text(this.s.dt.i18n("searchBuilder.logicAnd",
this.c.i18n.logicAnd))):"AND"===this.s.logic&&(this.s.logic="OR",g(this.dom.logic).text(this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr)))};k.version="1.0.0";k.classes={add:"dtsb-add",button:"dtsb-button",clearGroup:"dtsb-clearGroup",greyscale:"dtsb-greyscale",group:"dtsb-group",inputButton:"dtsb-iptbtn",logic:"dtsb-logic",logicContainer:"dtsb-logicContainer"};k.defaults={columns:!0,conditions:{date:l.dateConditions,html:l.stringConditions,"html-num":l.numConditions,"html-num-fmt":l.numFmtConditions,
luxon:l.luxonDateConditions,moment:l.momentDateConditions,num:l.numConditions,"num-fmt":l.numFmtConditions,string:l.stringConditions},depthLimit:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{"0":"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",deleteTitle:"Delete filtering rule",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{"0":"Custom Search Builder",_:"Custom Search Builder (%d)"},
value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1};u=k;var i,r,w,m=function(a,b){var c=this;if(!r||!r.versionCheck||!r.versionCheck("1.10.0"))throw Error("SearchBuilder requires DataTables 1.10 or newer");if(!r.DateTime)throw Error("SearchPane requires DateTime");var e=new r.Api(a);this.classes=i.extend(!0,{},m.classes);this.c=i.extend(!0,{},m.defaults,b);this.dom={clearAll:i('<button type="button">'+e.i18n("searchBuilder.clearAll",this.c.i18n.clearAll)+
"</button>").addClass(this.classes.clearAll).addClass(this.classes.button).attr("type","button"),container:i("<div/>").addClass(this.classes.container),title:i("<div/>").addClass(this.classes.title),titleRow:i("<div/>").addClass(this.classes.titleRow),topGroup:void 0};this.s={dt:e,opts:b,search:void 0,topGroup:void 0};if(void 0===e.settings()[0]._searchBuilder){e.settings()[0]._searchBuilder=this;if(this.s.dt.settings()[0]._bInitComplete)this._setUp();else e.one("init.dt",function(){c._setUp()});
return this}};m.prototype.getDetails=function(){return this.s.topGroup.getDetails()};m.prototype.getNode=function(){return this.dom.container};m.prototype.rebuild=function(a){i(this.dom.clearAll).click();if(void 0===a||null===a)return this;this.s.topGroup.rebuild(a);this.s.dt.draw();this.s.topGroup.setListeners();return this};m.prototype._applyPreDefDefaults=function(a){var b=this;void 0!==a.criteria&&void 0===a.logic&&(a.logic="AND");for(var c=function(a){a.criteria!==void 0?a=e._applyPreDefDefaults(a):
e.s.dt.columns().every(function(c){if(b.s.dt.settings()[0].aoColumns[c].sTitle===a.data)a.dataIdx=c})},e=this,d=0,f=a.criteria;d<f.length;d++)c(f[d]);return a};m.prototype._setUp=function(a){var b=this;void 0===a&&(a=!0);this.s.topGroup=new u(this.s.dt,this.c,void 0);this._setClearListener();this.s.dt.on("stateSaveParams",function(a,e,d){d.searchBuilder=b.getDetails();d.page=b.s.dt.page()});this._build();a&&(a=this.s.dt.state.loaded(),null!==a&&void 0!==a.searchBuilder?(this.s.topGroup.rebuild(a.searchBuilder),
i(this.s.topGroup.dom.container).trigger("dtsb-redrawContents"),this.s.dt.page(a.page).draw("page"),this.s.topGroup.setListeners()):!1!==this.c.preDefined&&(this.c.preDefined=this._applyPreDefDefaults(this.c.preDefined),this.rebuild(this.c.preDefined)));this._setEmptyListener();this.s.dt.state.save()};m.prototype._updateTitle=function(a){i(this.dom.title).text(this.s.dt.i18n("searchBuilder.title",this.c.i18n.title,a))};m.prototype._build=function(){var a=this;i(this.dom.clearAll).remove();i(this.dom.container).empty();
var b=this.s.topGroup.count();this._updateTitle(b);i(this.dom.titleRow).append(this.dom.title);i(this.dom.container).append(this.dom.titleRow);this.dom.topGroup=this.s.topGroup.getNode();i(this.dom.container).append(this.dom.topGroup);this._setRedrawListener();var c=this.s.dt.table(0).node();-1===i.fn.dataTable.ext.search.indexOf(this.s.search)&&(this.s.search=function(b,d,f){return b.nTable!==c?!0:a.s.topGroup.search(d,f)},i.fn.dataTable.ext.search.push(this.s.search));i.fn.DataTable.Api.registerPlural("columns().type()",
"column().type()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].sType},1)});this.s.dt.on("destroy.dt",function(){i(a.dom.container).remove();i(a.dom.clearAll).remove();for(var b=i.fn.dataTable.ext.search.indexOf(a.s.search);b!==-1;){i.fn.dataTable.ext.search.splice(b,1);b=i.fn.dataTable.ext.search.indexOf(a.s.search)}})};m.prototype._checkClear=function(){0<this.s.topGroup.s.criteria.length?(i(this.dom.clearAll).insertAfter(this.dom.title),this._setClearListener()):
i(this.dom.clearAll).remove()};m.prototype._filterChanged=function(a){var b=this.c.filterChanged;"function"===typeof b&&b(a,this.s.dt.i18n("searchBuilder.button",this.c.i18n.button,a))};m.prototype._setClearListener=function(){var a=this;i(this.dom.clearAll).unbind("click");i(this.dom.clearAll).on("click",function(){a.s.topGroup=new u(a.s.dt,a.c,void 0);a._build();a.s.dt.draw();a.s.topGroup.setListeners();i(a.dom.clearAll).remove();a._setEmptyListener();a._filterChanged(0);return!1})};m.prototype._setRedrawListener=
function(){var a=this;i(this.s.topGroup.dom.container).unbind("dtsb-redrawContents");i(this.s.topGroup.dom.container).on("dtsb-redrawContents",function(){a._checkClear();a.s.topGroup.redrawContents();a.s.topGroup.setupLogic();a._setEmptyListener();var b=a.s.topGroup.count();a._updateTitle(b);a._filterChanged(b);a.s.dt.state.save()});i(this.s.topGroup.dom.container).unbind("dtsb-redrawLogic");i(this.s.topGroup.dom.container).on("dtsb-redrawLogic",function(){a.s.topGroup.redrawLogic();var b=a.s.topGroup.count();
a._updateTitle(b);a._filterChanged(b)});i(this.s.topGroup.dom.container).on("dtsb-add",function(){var b=a.s.topGroup.count();a._updateTitle(b);a._filterChanged(b)});i(this.s.dt).on("postEdit postCreate postRemove",function(){a.s.topGroup.redrawContents()});i(this.s.topGroup.dom.container).unbind("dtsb-clearContents");i(this.s.topGroup.dom.container).on("dtsb-clearContents",function(){a._setUp(!1);a._filterChanged(0);a.s.dt.draw()});i(this.s.topGroup.dom.container).on("dtsb-updateTitle",function(){var b=
a.s.topGroup.count();a._updateTitle(b);a._filterChanged(b)})};m.prototype._setEmptyListener=function(){var a=this;i(this.s.topGroup.dom.add).on("click",function(){a._checkClear()});i(this.s.topGroup.dom.container).on("dtsb-destroy",function(){i(a.dom.clearAll).remove()})};m.version="1.0.1";m.classes={button:"dtsb-button",clearAll:"dtsb-clearAll",container:"dtsb-searchBuilder",inputButton:"dtsb-iptbtn",title:"dtsb-title",titleRow:"dtsb-titleRow"};m.defaults={columns:!0,conditions:{date:l.dateConditions,
html:l.stringConditions,"html-num":l.numConditions,"html-num-fmt":l.numFmtConditions,luxon:l.luxonDateConditions,moment:l.momentDateConditions,num:l.numConditions,"num-fmt":l.numFmtConditions,string:l.stringConditions},depthLimit:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{"0":"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",conditions:{array:{contains:"Contains",empty:"Empty",equals:"Equals",not:"Not",notEmpty:"Not Empty",without:"Without"},
date:{after:"After",before:"Before",between:"Between",empty:"Empty",equals:"Equals",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},number:{between:"Between",empty:"Empty",equals:"Equals",gt:"Greater Than",gte:"Greater Than Equal To",lt:"Less Than",lte:"Less Than Equal To",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},string:{contains:"Contains",empty:"Empty",endsWith:"Ends With",equals:"Equals",not:"Not",notEmpty:"Not Empty",startsWith:"Starts With"}},data:"Data",deleteTitle:"Delete filtering rule",
leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",rightTitle:"Indent criteria",title:{"0":"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1};w=m;var y=function(a,b,c){function d(a,b){var c=new h.Api(a),e=b?b:c.init().searchBuilder||h.defaults.searchBuilder;return(new w(c,e)).getNode()}i=a;r=a.fn.DataTable;g=a;t=a.fn.dataTable;f=a;var h=q=a.fn.dataTable;a.fn.dataTable.SearchBuilder=
w;a.fn.DataTable.SearchBuilder=w;a.fn.dataTable.Group=u;a.fn.DataTable.Group=u;a.fn.dataTable.Criteria=l;a.fn.DataTable.Criteria=l;b=a.fn.dataTable.Api.register;a.fn.dataTable.ext.searchBuilder={conditions:{}};a.fn.dataTable.ext.buttons.searchBuilder={action:function(a,b,c,d){a.stopPropagation();this.popover(d._searchBuilder.getNode(),{align:"dt-container"})},config:{},init:function(b,c,d){var e=new a.fn.dataTable.SearchBuilder(b,a.extend({filterChanged:function(a,d){b.button(c).text(d)}},d.config));
b.button(c).text(d.text||b.i18n("searchBuilder.button",e.c.i18n.button,0));d._searchBuilder=e},text:null};b("searchBuilder.getDetails()",function(){var a=this.context[0];return a._searchBuilder?a._searchBuilder.getDetails():null});b("searchBuilder.rebuild()",function(a){var b=this.context[0];if(void 0===b._searchBuilder)return null;b._searchBuilder.rebuild(a);return this});b("searchBuilder.container()",function(){var a=this.context[0];return a._searchBuilder?a._searchBuilder.getNode():null});a(c).on("preInit.dt.dtsp",
function(a,b){if("dt"===a.namespace&&(b.oInit.searchBuilder||h.defaults.searchBuilder))b._searchBuilder||d(b)});h.ext.feature.push({cFeature:"Q",fnInit:d});h.ext.features&&h.ext.features.register("searchBuilder",d)};"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(a){return y(a,window,document)}):"object"===typeof exports?module.exports=function(a,b){a||(a=window);if(!b||!b.fn.dataTable)b=require("datatables.net")(a,b).$;return y(b,a,a.document)}:y(window.jQuery,
window,document)})();
